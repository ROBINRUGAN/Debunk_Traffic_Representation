# 环境说明

## 当前已配置：Conda + pcapencoder 环境

- **Conda** 已安装在 **`~/miniconda3`**（即 `$HOME/miniconda3`）。
- 已用 **`code/PCAP_encoder/environment.yml`** 创建 conda 环境 **pcapencoder**（Python 3.10、PyTorch、transformers、scapy 等）。

### 首次使用：让终端识别 conda

在终端执行一次（或写入 `~/.bashrc`）：

```bash
# 初始化 conda（按需二选一）
source ~/miniconda3/etc/profile.d/conda.sh   # bash
# 或
source ~/miniconda3/etc/profile.d/conda.csh   # csh
```

### 激活环境并跑脚本

```bash
cd /home/gxy/llm-network/Debunk_Traffic_Representation
conda activate pcapencoder
# 然后跑转换或微调
```

### environment.yml 的修改说明

原 yml 中 `torch==2.2.2+cu118` 在 PyPI 上不存在，且与固定版本的 nvidia-* 冲突，已做两处修改以便 `conda env create` 能一次通过：

1. **torch/torchaudio/torchvision**：改为 `2.2.2` / `0.17.2`（从 PyPI 安装，当前会带上 CUDA 12 依赖）。
2. **nvidia-***：已从 pip 列表删除，由 torch 自动拉取对应版本。

若你希望使用 **CUDA 11.8** 版 PyTorch，可在激活环境后执行：

```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

---

## 小结

| 项目     | 说明 |
|----------|------|
| Conda 路径 | `~/miniconda3` |
| 环境名   | `pcapencoder` |
| 激活命令 | `conda activate pcapencoder` |
| 初始化   | 新开终端需先 `source ~/miniconda3/etc/profile.d/conda.sh`（或已写入 .bashrc） |
